var comments=webpackJsonp_name_([1],{0:function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}var i=n(1),c=t(i),a=n(2),o=t(a),l=o.default.Collection.extend({url:"/source/php/app/comments.php"}),s=window.app.comments,r=new l(s),d=o.default.Model.extend({defaults:{content:"",img_id:window.app.img_id}}),u=c.default.View.extend({template:function(t){return e.template("<p>Комментариев пока нет.</p>")()},className:"empty-view",replaceElement:!0,model:d}),m=c.default.View.extend({tagName:"li",initialize:function(){return this.listenTo(this.model,"change:content",this.render),this},template:function(e){return n(30)(e)},ui:{destroy:".destroy",edit:".edit"},events:{"click @ui.destroy":"remove"},triggers:{"click @ui.edit":"edit:comment"},remove:function(){function e(e,t){alert(t.msg)}return this.model.destroy({wait:!0,success:e,error:e}),this},edit:function(){return this}}),p=c.default.CollectionView.extend({emptyView:u,tagName:"ol",id:"comments-list",childView:m,replaceElement:!0}),h=c.default.View.extend({collection:r,el:"#comments",template:!1,regions:{list:{el:"#comments-list",replaceElement:!0}},ui:{button:".sbmt",textarea:".new-comment",descript:"p.descript",cancel:".cancel"},events:{"click @ui.button":"addComment","click @ui.cancel":"cancel"},initialize:function(){return this},onRender:function(){return this.showChildView("list",new p({collection:this.collection})),this},action:"create",addComment:function(){var e=this.getUI("textarea"),t=$(e).val().trim(),n=this;return t?void("create"==this.getOption("action")?this.collection.create({content:t,img_id:window.app.img_id},{wait:!0,success:function(){$(e).val("")}}):this.editChild.model.save({content:t},{wait:!0,success:function(t,i){$(e).val(""),n.action="create",alert(i.msg),n.getUI("descript").hide().fadeIn(300).text("Оставьте комментарий для потомков:")}})):(alert("Ошибка! Введите текст комментария!"),!1)},onChildviewEditComment:function(e){var t=e.model.get("content"),n=this.getUI("textarea");$(n).val(t),this.action="edit",this.editChild=e,this.getUI("descript").hide().fadeIn(300).text("Редактирование комментария:")},cancel:function(){this.action="",this.getUI("descript").hide().fadeIn(300).text("Оставьте комментарий для потомков:"),this.getUI("textarea").val("")}}),f=new h;f.render()}).call(t,n(3))},30:function(e,t,n){var i=n(9);e.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,c){var a;return e.escapeExpression((a=null!=(a=n.content||(null!=t?t.content:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"content",hash:{},data:c}):a))+'\r\n<p><span class="edit">Редактировать</span> <span class="destroy">Удалить</span></p>'},useData:!0})}});